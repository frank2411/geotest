{% load geojson_tags %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>

    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { width:500px; height: 500px; }
    </style>

</head>
<body>

    <div id="map"></div>


    <form action="." method="GET">
        {{ form }}
        <input type="submit" value="Search">
    </form>


    <div class="results">
        {% if terrains %}
            {% for terrain in terrains %}
                <div>{{ terrain }} {{terrain.valeur_terrain}}</div>

            {% endfor %}
        {% else %}
            <div>No results found</div>
        {% endif %}
    </div>


    <script type="text/javascript">

        //var to_polygon = {{circonscriptions_geojson|geojsonfeature|safe}};
        //var to_markers = 
        var to_polygon = {{circonscriptions_geojson|safe}}

        //console.log({{circonscriptions_geojson|safe}})

        function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 45.498469, lng: -73.562537},
            zoom: 12
          });

          map.data.addGeoJson(to_polygon)
          map.data.setStyle(function(feature) {
            var color = 'red';
            return ({
              fillColor: color,
              strokeColor: color,
              strokeWeight: 3
            });
          });


        }

    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCYVdMO9KjlIwe7pir9347_QFID59qDv3I&callback=initMap"></script>

</body>
</html>
